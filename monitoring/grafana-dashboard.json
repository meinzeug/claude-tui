{
  "dashboard": {
    "id": null,
    "title": "Claude TIU Production Dashboard",
    "tags": ["claude-tiu", "production"],
    "style": "dark",
    "timezone": "UTC",
    "editable": true,
    "hideControls": false,
    "graphTooltip": 1,
    "panels": [
      {
        "id": 1,
        "title": "Request Rate",
        "type": "graph",
        "span": 6,
        "targets": [
          {
            "expr": "sum(rate(http_requests_total{app=\"claude-tiu\"}[5m])) by (environment)",
            "format": "time_series",
            "legendFormat": "{{environment}} - Requests/sec"
          }
        ],
        "yAxes": [
          {
            "label": "Requests/sec",
            "min": 0
          }
        ],
        "xAxis": {
          "show": true
        },
        "grid": {
          "threshold1": null,
          "threshold2": null
        },
        "lines": true,
        "fill": 1,
        "linewidth": 2,
        "points": false,
        "pointradius": 5,
        "bars": false,
        "stack": false,
        "percentage": false,
        "legend": {
          "show": true,
          "values": false,
          "min": false,
          "max": false,
          "current": false,
          "total": false,
          "avg": false
        },
        "nullPointMode": "null"
      },
      {
        "id": 2,
        "title": "Error Rate",
        "type": "graph",
        "span": 6,
        "targets": [
          {
            "expr": "sum(rate(http_requests_total{app=\"claude-tiu\",status=~\"5..\"}[5m])) by (environment)",
            "format": "time_series",
            "legendFormat": "{{environment}} - Errors/sec"
          }
        ],
        "yAxes": [
          {
            "label": "Errors/sec",
            "min": 0
          }
        ],
        "alert": {
          "conditions": [
            {
              "query": {
                "params": ["A", "5m", "now"]
              },
              "reducer": {
                "type": "avg",
                "params": []
              },
              "evaluator": {
                "params": [0.1],
                "type": "gt"
              }
            }
          ],
          "executionErrorState": "alerting",
          "for": "5m",
          "frequency": "10s",
          "handler": 1,
          "name": "High Error Rate",
          "noDataState": "no_data",
          "notifications": []
        }
      },
      {
        "id": 3,
        "title": "Response Time",
        "type": "graph",
        "span": 6,
        "targets": [
          {
            "expr": "histogram_quantile(0.50, sum(rate(http_request_duration_seconds_bucket{app=\"claude-tiu\"}[5m])) by (le, environment))",
            "format": "time_series",
            "legendFormat": "{{environment}} - 50th percentile"
          },
          {
            "expr": "histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{app=\"claude-tiu\"}[5m])) by (le, environment))",
            "format": "time_series",
            "legendFormat": "{{environment}} - 95th percentile"
          }
        ],
        "yAxes": [
          {
            "label": "Response Time (seconds)",
            "min": 0
          }
        ]
      },
      {
        "id": 4,
        "title": "CPU Usage",
        "type": "graph",
        "span": 6,
        "targets": [
          {
            "expr": "avg(rate(container_cpu_usage_seconds_total{container=\"claude-tiu\"}[5m])) by (environment) * 100",
            "format": "time_series",
            "legendFormat": "{{environment}} - CPU %"
          }
        ],
        "yAxes": [
          {
            "label": "CPU Usage (%)",
            "min": 0,
            "max": 100
          }
        ]
      },
      {
        "id": 5,
        "title": "Memory Usage",
        "type": "graph",
        "span": 6,
        "targets": [
          {
            "expr": "avg(container_memory_usage_bytes{container=\"claude-tiu\"}) by (environment) / 1024 / 1024",
            "format": "time_series",
            "legendFormat": "{{environment}} - Memory (MB)"
          }
        ],
        "yAxes": [
          {
            "label": "Memory (MB)",
            "min": 0
          }
        ]
      },
      {
        "id": 6,
        "title": "Pod Count",
        "type": "singlestat",
        "span": 3,
        "targets": [
          {
            "expr": "count(kube_pod_info{pod=~\"claude-tiu-.*\", namespace=\"production\"})",
            "format": "time_series"
          }
        ],
        "valueName": "current",
        "colorBackground": false,
        "colorValue": true,
        "thresholds": "2,5",
        "colors": ["rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)"]
      },
      {
        "id": 7,
        "title": "Deployment Status",
        "type": "table",
        "span": 9,
        "targets": [
          {
            "expr": "kube_deployment_status_available_replicas{deployment=~\"claude-tiu-.*\"}",
            "format": "table",
            "instant": true
          }
        ],
        "columns": [
          {
            "text": "Deployment",
            "value": "deployment"
          },
          {
            "text": "Namespace",
            "value": "namespace"
          },
          {
            "text": "Available Replicas",
            "value": "Value"
          }
        ]
      }
    ],
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"],
      "time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"]
    },
    "templating": {
      "list": [
        {
          "name": "environment",
          "type": "query",
          "query": "label_values(kube_pod_info{pod=~\"claude-tiu-.*\"}, namespace)",
          "refresh": 1,
          "includeAll": true,
          "allValue": null
        }
      ]
    },
    "annotations": {
      "list": []
    },
    "schemaVersion": 16,
    "version": 1
  }
}